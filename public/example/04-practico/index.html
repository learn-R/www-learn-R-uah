<!DOCTYPE html>
<html lang="en-us" 
      xmlns:og="http://ogp.me/ns#" 
      xmlns:fb="https://www.facebook.com/2008/fbml">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.2.0 for Hugo" />
  

  

  
  
  
  
  
  

  

  
  
  
    
  
  <meta name="description" content="0. Objetivo de la práctica El objetivo del práctico, es avanzar en el procesamiento de los datos a través de la transformación de las variables a utilizar. Para ello revisaremos procedimientos básicos para el manejo de datos con Rstudio." />

  
  <link rel="alternate" hreflang="en-us" href="/example/04-practico/" />

  







  




  
  
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    <meta name="theme-color" content="#5271FF" />
  

  
  
    
    <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin="anonymous">

    
    

    
    
    
      
    
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
    
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Sans+Condensed:400,400i,700,700i%7CBarlow:ital,wght@0,400;0,700;1,400;1,700&display=swap">
      
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.563f345701788434b4fee407179620aa.css" />

  



  

  

  




  
  
  

  

  
    <link rel="manifest" href="/index.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hua2ec155b4296a9c9791d015323e16eb5_11927_32x32_fill_lanczos_center_2.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hua2ec155b4296a9c9791d015323e16eb5_11927_180x180_fill_lanczos_center_2.png" />

  <link rel="canonical" href="/example/04-practico/" />

  
  
  
  
  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary" />
  
    <meta property="twitter:site" content="@valentiandrade" />
    <meta property="twitter:creator" content="@valentiandrade" />
  
  <meta property="og:site_name" content="Análisis Estadístico en R" />
  <meta property="og:url" content="/example/04-practico/" />
  <meta property="og:title" content="Transformar y seleccionar variables | Análisis Estadístico en R" />
  <meta property="og:description" content="0. Objetivo de la práctica El objetivo del práctico, es avanzar en el procesamiento de los datos a través de la transformación de las variables a utilizar. Para ello revisaremos procedimientos básicos para el manejo de datos con Rstudio." /><meta property="og:image" content="/media/logo_hu02bc8dfe7cae86b2ee03430b67caeaf2_22353_300x300_fit_lanczos_2.png" />
    <meta property="twitter:image" content="/media/logo_hu02bc8dfe7cae86b2ee03430b67caeaf2_22353_300x300_fit_lanczos_2.png" /><meta property="og:locale" content="en-us" />
  
    
      <meta
        property="article:published_time"
        content="2021-08-30T00:00:00&#43;00:00"
      />
    
    <meta property="article:modified_time" content="2021-08-30T00:00:00&#43;00:00">
  

  



  

  

  <link rel="stylesheet" type="text/css" href="/custom-css/print.css" media="print" />

  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/img/apple-touch-icon-57x57.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/img/apple-touch-icon-114x114.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/img/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/img/apple-touch-icon-152x152.png" />
  <link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16" />
  <meta name="application-name" content="2255: Análisis Estadístico en R" />
  <meta name="msapplication-TileColor" content="#FFFFFF" />
  <meta name="msapplication-TileImage" content="/img/mstile-144x144.png" />


  <title>Transformar y seleccionar variables | Análisis Estadístico en R</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper  ">

  
  
  
  
  
  <script src="/js/wowchemy-init.js"></script>

    




    











  


<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container-xl">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/"><img src="/media/logo_hu02bc8dfe7cae86b2ee03430b67caeaf2_22353_0x70_resize_lanczos_2.png" alt="Análisis Estadístico en R"></a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/"><img src="/media/logo_hu02bc8dfe7cae86b2ee03430b67caeaf2_22353_0x70_resize_lanczos_2.png" alt="Análisis Estadístico en R"></a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-end" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>Organización</span><span class="caret"></span>
          </a>
          <div class="dropdown-menu">
            
              <a class="dropdown-item" href="/schedule/"><span>Planificación</span></a>
            
              <a class="dropdown-item" href="/syllabus/"><span>Syllabus</span></a>
            
          </div>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/content/"><span>Clases</span></a>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link  active" href="/example/"><span>Prácticos</span></a>
        </li>

        
        

        
        <li class="nav-item dropdown">
          <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>Tareas <i class="fab fa-github"></i></span><span class="caret"></span>
          </a>
          <div class="dropdown-menu">
            
              <a class="dropdown-item" href="/assignment/"><span>Tareas</span></a>
            
              <a class="dropdown-item" href="https://classroom.github.com/classrooms/86887318-learn-r-uah-2021"><span>Github Classroom<i class="fab fa-github"></i></span></a>
            
          </div>
        </li>

        
        

        

        
        
        
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/resource/"><span>Recursos</span></a>
        </li>

        
        

        

        
        
        
          
            
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="https://join.slack.com/t/learn-r-uah/shared_invite/zt-sh9uysuu-IzEG8~u5k2YYGWgpAFTRFA" target="_blank" rel="noopener"><span><i class="fab fa-slack"></i></span></a>
        </li>

        
        

        

        
        
        
          
            
          
        

        

        
        
        
        

        
          
            
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="https://rstudio.cloud/" target="_blank" rel="noopener"><span><i class="fab fa-r-project"></i></span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

      
      

      
      

      
      

      
      

    </ul>

  </div>
</nav>



    

<div class="container-fluid docs">
    <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
            





  
    
  




<form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-3" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <span><i class="fas fa-bars"></i></span>
  </button>

  
</form>

<nav class="collapse docs-links" id="docs-nav">
  

  
  
  
    
  

  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/example/">Información general</a>
    <ul class="nav docs-sidenav">
      
      <li >
        <a href="/example/">Prácticos (códigos de ejemplo)</a>
      </li>

      
    </ul>
    

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" >Datos</a>

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/example/01-practico/">Ejemplos</a>
    <ul class="nav docs-sidenav">
      
      <li >
        <a href="/example/01-practico/">1: R, RStudio y Github</a>
      </li>

      
      <li class="active">
        <a href="/example/04-practico/">4: Transformar y seleccionar variables</a>
      </li>

      
    </ul>
    

  </div>
  
  
</nav>

        </div>

        
        <div class="d-none d-xl-block col-xl-2 docs-toc">
            <ul class="nav toc-top">
                <li><a href="#" id="back_to_top" class="docs-toc-title">Contents</a></li>
            </ul>

            <nav id="TableOfContents">
  <ul>
    <li><a href="#0-objetivo-de-la-práctica">0. Objetivo de la práctica</a></li>
    <li><a href="#1-recursos-de-la-práctica">1. Recursos de la práctica</a></li>
    <li><a href="#2-librerias-a-utilizar">2. Librerias a utilizar</a></li>
    <li><a href="#3-cargar-base-de-datos-y-explorarla">3. Cargar base de datos y explorarla</a></li>
    <li><a href="#4-aspectos-claves-antes-de-comenzar">4. Aspectos claves antes de comenzar</a>
      <ul>
        <li><a href="#operador-pipeline-">Operador pipeline %&gt;%</a></li>
        <li><a href="#boolaenos-y-operadores-lógicos">boolaenos y operadores lógicos</a></li>
      </ul>
    </li>
    <li><a href="#5-transformación-y-selección-de-variables-con-tidyversedplyr">5. Transformación y selección de variables con tidyverse:Dplyr</a>
      <ul>
        <li><a href="#51-select">5.1 select()</a>
          <ul>
            <li><a href="#selección-de-las-variables-en-la-base-de-datos-a-utilizar">selección de las variables en la base de datos a utilizar</a></li>
            <li><a href="#selección-de-las-variables-por-indexación">selección de las variables por <em>indexación</em></a></li>
            <li><a href="#selección-y-renombrar">Selección y renombrar</a></li>
            <li><a href="#selección-que-inicia-con-prefijos-starts_with-y-termina-con-sufijos-ends_with">Selección que inicia con prefijos (starts_with) y termina con sufijos (ends_with)</a></li>
            <li><a href="#selección-que-contiene-cadenas-contains">Selección que contiene cadenas (contains)</a></li>
            <li><a href="#selección-con-expresiones-matches">Selección con expresiones (matches)</a></li>
            <li><a href="#selección-y-función-where">Selección y función where</a></li>
          </ul>
        </li>
        <li><a href="#52-filter">5.2 filter()</a>
          <ul>
            <li><a href="#filtar-según-caracteres">Filtar según caracteres</a></li>
            <li><a href="#filtar-según-números">Filtar según números</a></li>
          </ul>
        </li>
        <li><a href="#53-mutate-">5.3 mutate ()</a>
          <ul>
            <li><a href="#creación-de-variable-a-partir-de-cálculos">creación de variable a partir de cálculos</a></li>
            <li><a href="#mutate-y-filter">Mutate y filter</a></li>
          </ul>
        </li>
        <li><a href="#531-recode">5.3.1 recode()</a>
          <ul>
            <li><a href="#factors">Factors</a></li>
            <li><a href="#numeric">Numeric</a></li>
          </ul>
        </li>
        <li><a href="#532-if_else">5.3.2 if_else()</a></li>
      </ul>
    </li>
    <li><a href="#533-mutate-group_by-n">5.3.3 mutate group_by n()</a></li>
  </ul>

  <ul>
    <li><a href="#6-resumen-con-procesamiento-de-las-variables">6. Resumen con procesamiento de las variables</a></li>
    <li><a href="#7-guardar-base-procesada">7. Guardar base procesada</a></li>
    <li><a href="#8-reporte-de-progreso">8. Reporte de progreso</a></li>
  </ul>
</nav>

 
        </div>
        

        <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

            <article class="article">

                <div class="docs-article-container">
                    <h1>Transformar y seleccionar variables</h1>

                    

                    

                    

                    <div class="article-style">
                        <h2 id="0-objetivo-de-la-práctica">0. Objetivo de la práctica</h2>
<p>El objetivo del práctico, es avanzar en el procesamiento de los datos a través de la transformación de las variables a utilizar. Para ello revisaremos procedimientos básicos para el manejo de datos con Rstudio.</p>
<h2 id="1-recursos-de-la-práctica">1. Recursos de la práctica</h2>
<p>En este práctico utilizaremos la base de datos de la <a href="https://www.estudiospnud.cl/bases-de-datos_proc/desigualdades-economicas-y-sociales-desiguales-2016/" target="_blank" rel="noopener"><strong>Encuesta Desigualdades Económicas y Sociales (Desiguales)(2016)</strong></a>, la cual fue procesada en el <a href="">Práctico anterior</a>.Recuerden siempre consultar el <a href="https://www.estudiospnud.cl/wp-content/uploads/2020/04/DES_2016_manual-2.pdf" target="_blank" rel="noopener"><strong>manual/libro de códigos</strong></a> antes de trabajar una base de datos.</p>
<h2 id="2-librerias-a-utilizar">2. Librerias a utilizar</h2>
<p>En este práctico utilizaremos cuatro paquetes, el primero se llama <strong>pacman</strong> este facilita y agiliza la lectura de los paquetes a utilizar en R; el segundo es <strong>sjmisc</strong>, el tercero es <strong>car</strong> para recodificar y el cuarto es <strong>Tidyverse</strong>, este es una colección de paquetes de código abierto. De este último utilizaremos <strong>Dplyr y Forcast</strong>, si quieres averiguar más puedes ir <a href="https://www.tidyverse.org/" target="_blank" rel="noopener">acá</a></p>
<blockquote>
<p>Recuerden que previo a cargar la base de datos, se deben cargar los paquetes</p>
</blockquote>
<p>Primero instalamos pacman por unica vez</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">install.packages</span>(<span style="color:#e6db74">&#34;pacman&#34;</span>)
<span style="color:#a6e22e">library </span>(pacman)
</code></pre></div><p>Luego cargaremos así los paquetes de R</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">pacman<span style="color:#f92672">::</span><span style="color:#a6e22e">p_load</span>(tidyverse,
               car,
               sjmisc)
</code></pre></div><h2 id="3-cargar-base-de-datos-y-explorarla">3. Cargar base de datos y explorarla</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">read_sav</span>(<span style="color:#e6db74">&#34;../Rproject/datos_proc.sav&#34;</span>) 
</code></pre></div><p>En el panel <strong>Environment</strong>, visualizamos el nuevo objeto, que posee 2.613 observaciones (o filas), y 329 variables (o columnas). También podemos explorar la base de datos con los siguientes comandos</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">dim</span>(datos) <span style="color:#75715e"># nos entrega las dimensiones, es decir el numero de observaciones y el número de variables</span>
<span style="color:#a6e22e">view</span>(datos) <span style="color:#75715e"># se usa para visualizar la base de datos</span>
<span style="color:#a6e22e">find_var</span>() <span style="color:#75715e"># se utiliza para encontrar variables</span>
<span style="color:#a6e22e">names</span>(datos) <span style="color:#75715e"># entrega los nombres de las variables que componen el dataset</span>
<span style="color:#a6e22e">head</span>(datos) <span style="color:#75715e"># muestra las primeras filas presentes en el marco de datos</span>
</code></pre></div><h2 id="4-aspectos-claves-antes-de-comenzar">4. Aspectos claves antes de comenzar</h2>
<p>Previo a trabajar con la base de datos, debemos conocer aspectos claves que facilitaran el uso y entendimiento de Rstudio</p>
<h3 id="operador-pipeline-">Operador pipeline %&gt;%</h3>
<p>El operador pipe %&gt;% es útil para concatenar múltiples operaciones, el comando para usarlo es <strong>Ctrl + shift + M</strong> o <strong>Cmd + shift + M</strong></p>
<h3 id="boolaenos-y-operadores-lógicos">boolaenos y operadores lógicos</h3>
<p>Estos son símbolos lógicos que son utilizados en R para designar funciones.</p>
<ol>
<li>En primer lugar están los <strong>operadores relacionales</strong>, estos se usan para hacer comparaciones</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#f92672">&lt;</span>		Este signo se usa para designar que un valor es menor que otro
<span style="color:#f92672">&gt;</span>		Este es para designar que un valor es mayor que otro
<span style="color:#f92672">==</span>		Con este se señala que un valor es igual que otro
<span style="color:#f92672">&lt;=</span>		La composición de estos dos símbolos se usa para decir que un valor es menor o igual que otro
<span style="color:#f92672">&gt;=</span>		Esta para decir que un valor es mayor o igual que otro
<span style="color:#f92672">!=</span>		Este para decir que el valor es diferente que otro
<span style="color:#f92672">%in%</span>		Este significa que un valor pertenece al conjunto designado
is.na		Este es para asignar un valor como pérdido o <span style="color:#66d9ef">NA</span>
<span style="color:#f92672">!</span>is.na		Este para decir que un valor no es <span style="color:#66d9ef">NA</span>
</code></pre></div><ol start="2">
<li>
<p>En segundo lugar, están los <strong>operadores aritméticos</strong>, los cuales realizan operaciones, como la suma, resta, división, entre otros.</p>
</li>
<li>
<p>En tercer lugar, los <strong>operadores de asignación</strong>, es decir que están encargados de asignar valores a objetos</p>
</li>
<li>
<p>Finalmente, los <strong>operadores booleanos</strong>, los cuales describen relaciones lógicas, como:</p>
</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#f92672">&amp;</span>		Este operador es la condición y, es decir si se cumplen todas condiciones mencionadas
<span style="color:#f92672">|</span>		Este es la condición o, es decir si se cumple una condición u otra mencionada
<span style="color:#a6e22e">xor</span>()		Este excluye o saca la condición mencionada
<span style="color:#f92672">!</span>		Significa que no es la condición que se menciona
any		Significa que ninguna de las condiciones serán utilizadas
all 		Significa que todas las condiciones serán utilizadas
</code></pre></div><p><img src="../www-learn-R-uah/static/img/example/operad.png" width="60%" /></p>
<h2 id="5-transformación-y-selección-de-variables-con-tidyversedplyr">5. Transformación y selección de variables con tidyverse:Dplyr</h2>
<p>Dplyr proporciona una gramática de manipulación de datos, proporcionando un conjunto consistente de verbos que ayudan a resolver desafíos de manipulación de datos más comunes. Este posee diversas funciones, en estre práctico veremos las principales:</p>
<h3 id="51-select">5.1 select()</h3>
<p>Nuestra función select escoge variables basándose en sus nombres o funciones</p>
<h4 id="selección-de-las-variables-en-la-base-de-datos-a-utilizar">selección de las variables en la base de datos a utilizar</h4>
<p>Como lo vieron en el <a href="">Práctico anterior</a> se deben seleccionar las variables a utilizar, para ello usaremos la funcion select, sin embargo en este práctico profundizaremos sobre su uso.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos_proc <span style="color:#f92672">&lt;-</span> datos <span style="color:#f92672">%&gt;%</span> <span style="color:#75715e"># se crea un nuevo objeto llamado datos_proc_proc a partir de la base de datos_proc cargada, esto más el operador pipe</span>
  <span style="color:#a6e22e">select</span>(edad <span style="color:#f92672">=</span> V6,     <span style="color:#75715e"># Con esta función se seleccionan las variables a utilizar en el práctico, asignándoles con &#34;=&#34; el nuevo nombre que llevará</span>
         sexo <span style="color:#f92672">=</span> V2,   
         garan_min_vid <span style="color:#f92672">=</span> V146,
         clase_sub <span style="color:#f92672">=</span> V70,
         just_pago_educ <span style="color:#f92672">=</span> V117)
</code></pre></div><p>Se seleccionaron las variables</p>
<ul>
<li>Edad</li>
<li>Sexo</li>
<li>Rol Gobierno: garantizar minimo vida</li>
<li>¿En que clase social ubicaría a la gente como usted?</li>
<li>Justo: mas pago, mejor educacion</li>
</ul>
<div class="note">
Forcats de Tidyverse proporciona un conjunto de herramientas útiles que resuelven problemas comunes con factores. R usa factores para manejar variables categóricas, variables que tienen un conjunto fijo y conocido de valores posibles. Para eso asignaremos valores a las varibales que estan codificadas de forma numerica, pero son factores.
</div>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">as_factor </span>(datos_proc<span style="color:#f92672">$</span>sexo) 
</code></pre></div><h4 id="selección-de-las-variables-por-indexación">selección de las variables por <em>indexación</em></h4>
<p>Además, se puede seleccionar variables, donde a partir de los datos_proc procesados se seleccionarán los casos que estén entre 1 y 2 de la variable <em>&lsquo;garan_min_vid&rsquo;</em>, que tiene como categoría de respuesta</p>
<p>1 Muy de acuerdo</p>
<p>2 De acuerdo</p>
<p>3 Ni de acuerdo ni en desacuerdo</p>
<p>4 En desacuerdo</p>
<p>5 Muy en desacuerdo</p>
<p>Para ello seleccionaremos sólo a las personas que estan de acuerdo de que el gobierno garantice un mínimo de vida.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos_proc <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">select</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">2</span>, garan_min_vid) <span style="color:#75715e"># seleccionan las categorias de respuesta y luego la variable de donde lo seleccionarán</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e">## # A tibble: 2,613 x 3</span>
<span style="color:#75715e">##    edad       sexo      garan_min_vid</span>
<span style="color:#75715e">##   &lt;dbl&gt;  &lt;dbl+lbl&gt;          &lt;dbl+lbl&gt;</span>
<span style="color:#75715e">## 1    40 1 [Hombre] 1 [Muy de acuerdo]</span>
<span style="color:#75715e">## 2    18 1 [Hombre] 1 [Muy de acuerdo]</span>
<span style="color:#75715e">## 3    66 2 [Mujer]  1 [Muy de acuerdo]</span>
<span style="color:#75715e">## 4    56 2 [Mujer]  2 [De acuerdo]    </span>
<span style="color:#75715e">## 5    63 1 [Hombre] 1 [Muy de acuerdo]</span>
<span style="color:#75715e">## 6    62 2 [Mujer]  1 [Muy de acuerdo]</span>
<span style="color:#75715e">## 7    54 1 [Hombre] 2 [De acuerdo]    </span>
<span style="color:#75715e">## 8    75 2 [Mujer]  2 [De acuerdo]    </span>
<span style="color:#75715e">## 9    36 2 [Mujer]  2 [De acuerdo]    </span>
<span style="color:#75715e">##10    40 2 [Mujer]  2 [De acuerdo]    </span>
<span style="color:#75715e">## # ... with 2,603 more rows</span>
</code></pre></div><p>En este caso seleccionamos todo según los datos de la variable garan_min_vid, con <strong>everything()</strong>. Que selecciona todas las columnas o las columnas que quedan después de aplicar las funciones de selección. Es decir las personas que estan de acuerdo con que el gobienro garantice un mínimo de vida.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos_proc <span style="color:#f92672">%&gt;%</span>  <span style="color:#a6e22e">select</span>(garan_min_vid, <span style="color:#a6e22e">everything</span>())
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## # A tibble: 2,613 x 5
##        garan_min_vid  edad      sexo        clase_sub             just_pago_educ
##            &lt;dbl+lbl&gt; &lt;dbl&gt; &lt;dbl+lbl&gt;        &lt;dbl+lbl&gt;                  &lt;dbl+lbl&gt;
##  1 1 [Muy de acuerd~    40 1 [Hombr~ 4 [Clase media ~ 4 [En desacuerdo]         
##  2 1 [Muy de acuerd~    18 1 [Hombr~ 3 [Clase media]  3 [Ni de acuerdo ni en de~
##  3 1 [Muy de acuerd~    66 2 [Mujer] 3 [Clase media]  4 [En desacuerdo]         
##  4 2 [De acuerdo]       56 2 [Mujer] 5 [Clase baja]   4 [En desacuerdo]         
##  5 1 [Muy de acuerd~    63 1 [Hombr~ 5 [Clase baja]   4 [En desacuerdo]         
##  6 1 [Muy de acuerd~    62 2 [Mujer] 4 [Clase media ~ 1 [Muy de acuerdo]        
##  7 2 [De acuerdo]       54 1 [Hombr~ 4 [Clase media ~ 2 [De acuerdo]            
##  8 2 [De acuerdo]       75 2 [Mujer] 5 [Clase baja]   4 [En desacuerdo]         
##  9 2 [De acuerdo]       36 2 [Mujer] 4 [Clase media ~ 4 [En desacuerdo]         
## 10 2 [De acuerdo]       40 2 [Mujer] 5 [Clase baja]   4 [En desacuerdo]         
## # ... with 2,603 more rows
</code></pre></div><h4 id="selección-y-renombrar">Selección y renombrar</h4>
<p>También podemos <em>seleccionar y renombrar</em>, es decir, seleccionar según <em>garan_min_vid</em> y renombrar la variable cómo <em>acuerdo_garan_min_vid</em></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos_proc <span style="color:#f92672">%&gt;%</span>  <span style="color:#a6e22e">select</span>(garan_min_vid, acuerdo_garan_min_vid <span style="color:#f92672">=</span> garan_min_vid ,<span style="color:#a6e22e">everything</span>())
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## # A tibble: 2,613 x 5
##    acuerdo_garan_min_~  edad      sexo       clase_sub            just_pago_educ
##              &lt;dbl+lbl&gt; &lt;dbl&gt; &lt;dbl+lbl&gt;       &lt;dbl+lbl&gt;                 &lt;dbl+lbl&gt;
##  1  1 [Muy de acuerdo]    40 1 [Hombr~ 4 [Clase media~ 4 [En desacuerdo]        
##  2  1 [Muy de acuerdo]    18 1 [Hombr~ 3 [Clase media] 3 [Ni de acuerdo ni en d~
##  3  1 [Muy de acuerdo]    66 2 [Mujer] 3 [Clase media] 4 [En desacuerdo]        
##  4  2 [De acuerdo]        56 2 [Mujer] 5 [Clase baja]  4 [En desacuerdo]        
##  5  1 [Muy de acuerdo]    63 1 [Hombr~ 5 [Clase baja]  4 [En desacuerdo]        
##  6  1 [Muy de acuerdo]    62 2 [Mujer] 4 [Clase media~ 1 [Muy de acuerdo]       
##  7  2 [De acuerdo]        54 1 [Hombr~ 4 [Clase media~ 2 [De acuerdo]           
##  8  2 [De acuerdo]        75 2 [Mujer] 5 [Clase baja]  4 [En desacuerdo]        
##  9  2 [De acuerdo]        36 2 [Mujer] 4 [Clase media~ 4 [En desacuerdo]        
## 10  2 [De acuerdo]        40 2 [Mujer] 5 [Clase baja]  4 [En desacuerdo]        
## # ... with 2,603 more rows
</code></pre></div><h4 id="selección-que-inicia-con-prefijos-starts_with-y-termina-con-sufijos-ends_with">Selección que inicia con prefijos (starts_with) y termina con sufijos (ends_with)</h4>
<p>El primer ejemplo muestra la selección de casos que inicien con la variable edad y que terminen con sexo</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos_proc <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">select</span>(<span style="color:#a6e22e">starts_with</span>(<span style="color:#e6db74">&#34;edad&#34;</span>), <span style="color:#a6e22e">ends_with</span>(<span style="color:#e6db74">&#34;sexo&#34;</span>))
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## # A tibble: 2,613 x 2
##     edad       sexo
##    &lt;dbl&gt;  &lt;dbl+lbl&gt;
##  1    40 1 [Hombre]
##  2    18 1 [Hombre]
##  3    66 2 [Mujer] 
##  4    56 2 [Mujer] 
##  5    63 1 [Hombre]
##  6    62 2 [Mujer] 
##  7    54 1 [Hombre]
##  8    75 2 [Mujer] 
##  9    36 2 [Mujer] 
## 10    40 2 [Mujer] 
## # ... with 2,603 more rows
</code></pre></div><h4 id="selección-que-contiene-cadenas-contains">Selección que contiene cadenas (contains)</h4>
<p>El segundo selecciona los casos que contienen una letra m <strong>o</strong> los que contienen una letra y</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos_proc <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">select</span>(<span style="color:#a6e22e">contains</span>(<span style="color:#e6db74">&#34;m&#34;</span>)<span style="color:#f92672">|</span><span style="color:#a6e22e">contains</span>(<span style="color:#e6db74">&#34;y&#34;</span>))
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## # A tibble: 2,613 x 1
##         garan_min_vid
##             &lt;dbl+lbl&gt;
##  1 1 [Muy de acuerdo]
##  2 1 [Muy de acuerdo]
##  3 1 [Muy de acuerdo]
##  4 2 [De acuerdo]    
##  5 1 [Muy de acuerdo]
##  6 1 [Muy de acuerdo]
##  7 2 [De acuerdo]    
##  8 2 [De acuerdo]    
##  9 2 [De acuerdo]    
## 10 2 [De acuerdo]    
## # ... with 2,603 more rows
</code></pre></div><h4 id="selección-con-expresiones-matches">Selección con expresiones (matches)</h4>
<p>El último ejemplo, selecciona las variables que contengan el nombre sexo</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos_proc <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">select</span>(<span style="color:#a6e22e">matches</span>(<span style="color:#e6db74">&#34;sexo&#34;</span>))
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## # A tibble: 2,613 x 1
##          sexo
##     &lt;dbl+lbl&gt;
##  1 1 [Hombre]
##  2 1 [Hombre]
##  3 2 [Mujer] 
##  4 2 [Mujer] 
##  5 1 [Hombre]
##  6 2 [Mujer] 
##  7 1 [Hombre]
##  8 2 [Mujer] 
##  9 2 [Mujer] 
## 10 2 [Mujer] 
## # ... with 2,603 more rows
</code></pre></div><h4 id="selección-y-función-where">Selección y función where</h4>
<p>La función select puede combinarse con la función where, es decir selecciona con la condición cuando, en este caso selecciona cuando el valor es numérico.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos_proc <span style="color:#f92672">%&gt;%</span> <span style="color:#a6e22e">select</span>(<span style="color:#a6e22e">where</span>(is.numeric))
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## # A tibble: 2,613 x 5
##     edad      sexo     garan_min_vid        clase_sub             just_pago_educ
##    &lt;dbl&gt; &lt;dbl+lbl&gt;         &lt;dbl+lbl&gt;        &lt;dbl+lbl&gt;                  &lt;dbl+lbl&gt;
##  1    40 1 [Hombr~ 1 [Muy de acuerd~ 4 [Clase media ~ 4 [En desacuerdo]         
##  2    18 1 [Hombr~ 1 [Muy de acuerd~ 3 [Clase media]  3 [Ni de acuerdo ni en de~
##  3    66 2 [Mujer] 1 [Muy de acuerd~ 3 [Clase media]  4 [En desacuerdo]         
##  4    56 2 [Mujer] 2 [De acuerdo]    5 [Clase baja]   4 [En desacuerdo]         
##  5    63 1 [Hombr~ 1 [Muy de acuerd~ 5 [Clase baja]   4 [En desacuerdo]         
##  6    62 2 [Mujer] 1 [Muy de acuerd~ 4 [Clase media ~ 1 [Muy de acuerdo]        
##  7    54 1 [Hombr~ 2 [De acuerdo]    4 [Clase media ~ 2 [De acuerdo]            
##  8    75 2 [Mujer] 2 [De acuerdo]    5 [Clase baja]   4 [En desacuerdo]         
##  9    36 2 [Mujer] 2 [De acuerdo]    4 [Clase media ~ 4 [En desacuerdo]         
## 10    40 2 [Mujer] 2 [De acuerdo]    5 [Clase baja]   4 [En desacuerdo]         
## # ... with 2,603 more rows
</code></pre></div><h3 id="52-filter">5.2 filter()</h3>
<p>La función filter de dplyr, escoge o extrae filas basados en sus valores, subdivide un data frame, reteniendo todas las filas que satisfacen sus condiciones.</p>
<p>Antes de esto, hay que tener en cuenta que para establecer las condiciones a utilizar en las funciones debemos usar <strong>operadores</strong>, ya que la estructutra será <strong>filter(data, variable (operador lógico) condición)</strong></p>
<h4 id="filtar-según-caracteres">Filtar según caracteres</h4>
<p>A la hora de filtrar según caracteres nuestro primer ejemplo nos muestra cómo filtrar los datos excluyendo el sexo Hombre</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">filter</span>(datos_proc, sexo  <span style="color:#f92672">!=</span> <span style="color:#e6db74">&#34;Hombre&#34;</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e">## # A tibble: 1,601 x 5</span>
<span style="color:#75715e">##    edad sexo       garan_min_vid            clase_sub        just_pago_educ</span>
<span style="color:#75715e">##   &lt;dbl&gt; &lt;fct&gt;          &lt;dbl+lbl&gt;            &lt;dbl+lbl&gt;             &lt;dbl+lbl&gt;</span>
<span style="color:#75715e">## 1    66 Mujer 1 [Muy de acuerdo] 3 [Clase media]      4 [En desacuerdo]    </span>
<span style="color:#75715e">## 2    56 Mujer 2 [De acuerdo]     5 [Clase baja]       4 [En desacuerdo]    </span>
<span style="color:#75715e">## 3    62 Mujer 1 [Muy de acuerdo] 4 [Clase media baja] 1 [Muy de acuerdo]   </span>
<span style="color:#75715e">## 4    75 Mujer 2 [De acuerdo]     5 [Clase baja]       4 [En desacuerdo]    </span>
<span style="color:#75715e">## 5    36 Mujer 2 [De acuerdo]     4 [Clase media baja] 4 [En desacuerdo]    </span>
<span style="color:#75715e">## 6    40 Mujer 2 [De acuerdo]     5 [Clase baja]       4 [En desacuerdo]    </span>
<span style="color:#75715e">## 7    29 Mujer 2 [De acuerdo]     2 [Clase media alta] 4 [En desacuerdo]    </span>
<span style="color:#75715e">## 8    53 Mujer 2 [De acuerdo]     3 [Clase media]      4 [En desacuerdo]    </span>
<span style="color:#75715e">## 9    31 Mujer 2 [De acuerdo]     5 [Clase baja]       5 [Muy en desacuerdo]</span>
<span style="color:#75715e">## 10    48 Mujer 2 [De acuerdo]     3 [Clase media]      5 [Muy en desacuerdo]</span>
<span style="color:#75715e">## # ... with 1,591 more rows</span>
<span style="color:#f92672">&gt;</span> 
</code></pre></div><p>Ahora si queremos filtrar y dejar sólo a los hombres, se usa el operador ==</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">filter</span>(datos_proc, sexo <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;hombre&#34;</span>) 
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e">## # A tibble: 0 x 5</span>
<span style="color:#75715e">## # ... with 5 variables: edad &lt;dbl&gt;, sexo &lt;fct&gt;, garan_min_vid &lt;dbl+lbl&gt;, clase_sub &lt;dbl+lbl&gt;, just_pago_educ &lt;dbl+lbl&gt;</span>
</code></pre></div><p>En este caso no sirvio el comando porque no esta escrito correctamente (Sin mayúscula)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">filter</span>(datos_proc, sexo <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Hombre&#34;</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e">## # A tibble: 1,012 x 5</span>
<span style="color:#75715e">##    edad sexo                        garan_min_vid            clase_sub                     just_pago_educ</span>
<span style="color:#75715e">##   &lt;dbl&gt; &lt;fct&gt;                           &lt;dbl+lbl&gt;            &lt;dbl+lbl&gt;                          &lt;dbl+lbl&gt;</span>
<span style="color:#75715e">## 1    40 Hombre 1 [Muy de acuerdo]                 4 [Clase media baja] 4 [En desacuerdo]                 </span>
<span style="color:#75715e">## 2    18 Hombre 1 [Muy de acuerdo]                 3 [Clase media]      3 [Ni de acuerdo ni en desacuerdo]</span>
<span style="color:#75715e">## 3    63 Hombre 1 [Muy de acuerdo]                 5 [Clase baja]       4 [En desacuerdo]                 </span>
<span style="color:#75715e">## 4    54 Hombre 2 [De acuerdo]                     4 [Clase media baja] 2 [De acuerdo]                    </span>
<span style="color:#75715e">## 5    18 Hombre 2 [De acuerdo]                     5 [Clase baja]       4 [En desacuerdo]                 </span>
<span style="color:#75715e">## 6    20 Hombre 2 [De acuerdo]                     4 [Clase media baja] 3 [Ni de acuerdo ni en desacuerdo]</span>
<span style="color:#75715e">## 7    23 Hombre 2 [De acuerdo]                     4 [Clase media baja] 3 [Ni de acuerdo ni en desacuerdo]</span>
<span style="color:#75715e">## 8    26 Hombre 1 [Muy de acuerdo]                 4 [Clase media baja] 3 [Ni de acuerdo ni en desacuerdo]</span>
<span style="color:#75715e">## 9    27 Hombre 3 [Ni de acuerdo ni en desacuerdo] 4 [Clase media baja] 3 [Ni de acuerdo ni en desacuerdo]</span>
<span style="color:#75715e">## 10    63 Hombre 2 [De acuerdo]                     3 [Clase media]      2 [De acuerdo]                    </span>
<span style="color:#75715e">## # ... with 1,002 more rows</span>
</code></pre></div><p>Finalmente, si queremos filtrar según un conjunto de caracteres, usamos el operador %in% y nos quedamos con mujeres y hombres</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">filter</span>(datos_proc, sexo <span style="color:#f92672">%in%</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Mujer&#34;</span>, <span style="color:#e6db74">&#34;Hombre&#34;</span>))
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## # A tibble: 0 x 5
## # ... with 5 variables: edad &lt;dbl&gt;, sexo &lt;dbl+lbl&gt;, garan_min_vid &lt;dbl+lbl&gt;,
## #   clase_sub &lt;dbl+lbl&gt;, just_pago_educ &lt;dbl+lbl&gt;
</code></pre></div><h4 id="filtar-según-números">Filtar según números</h4>
<p>Ahora filtraremos según datos numéricos</p>
<p>En este caso queremos dejar todos los casos que sean de clase media, clase media baja, o clase baja</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">filter</span>(datos_proc, clase_sub <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">3</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## # A tibble: 1,284 x 5
##     edad       sexo      garan_min_vid            clase_sub       just_pago_educ
##    &lt;dbl&gt;  &lt;dbl+lbl&gt;          &lt;dbl+lbl&gt;            &lt;dbl+lbl&gt;            &lt;dbl+lbl&gt;
##  1    40 1 [Hombre] 1 [Muy de acuerdo] 4 [Clase media baja] 4 [En desacuerdo]   
##  2    56 2 [Mujer]  2 [De acuerdo]     5 [Clase baja]       4 [En desacuerdo]   
##  3    63 1 [Hombre] 1 [Muy de acuerdo] 5 [Clase baja]       4 [En desacuerdo]   
##  4    62 2 [Mujer]  1 [Muy de acuerdo] 4 [Clase media baja] 1 [Muy de acuerdo]  
##  5    54 1 [Hombre] 2 [De acuerdo]     4 [Clase media baja] 2 [De acuerdo]      
##  6    75 2 [Mujer]  2 [De acuerdo]     5 [Clase baja]       4 [En desacuerdo]   
##  7    36 2 [Mujer]  2 [De acuerdo]     4 [Clase media baja] 4 [En desacuerdo]   
##  8    40 2 [Mujer]  2 [De acuerdo]     5 [Clase baja]       4 [En desacuerdo]   
##  9    31 2 [Mujer]  2 [De acuerdo]     5 [Clase baja]       5 [Muy en desacuerd~
## 10    18 1 [Hombre] 2 [De acuerdo]     5 [Clase baja]       4 [En desacuerdo]   
## # ... with 1,274 more rows
</code></pre></div><p>Acá podemos ver que parten desde <em>Clase media baja</em>, pero si queremos considerar la <strong>Clase media</strong>, usamos el operador <strong>mayor o igual</strong>. Además con el operador &amp; nos añadirá también a las mujeres</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">filter</span>(datos_proc, clase_sub <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">3</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## # A tibble: 2,174 x 5
##     edad      sexo     garan_min_vid        clase_sub             just_pago_educ
##    &lt;dbl&gt; &lt;dbl+lbl&gt;         &lt;dbl+lbl&gt;        &lt;dbl+lbl&gt;                  &lt;dbl+lbl&gt;
##  1    40 1 [Hombr~ 1 [Muy de acuerd~ 4 [Clase media ~ 4 [En desacuerdo]         
##  2    18 1 [Hombr~ 1 [Muy de acuerd~ 3 [Clase media]  3 [Ni de acuerdo ni en de~
##  3    66 2 [Mujer] 1 [Muy de acuerd~ 3 [Clase media]  4 [En desacuerdo]         
##  4    56 2 [Mujer] 2 [De acuerdo]    5 [Clase baja]   4 [En desacuerdo]         
##  5    63 1 [Hombr~ 1 [Muy de acuerd~ 5 [Clase baja]   4 [En desacuerdo]         
##  6    62 2 [Mujer] 1 [Muy de acuerd~ 4 [Clase media ~ 1 [Muy de acuerdo]        
##  7    54 1 [Hombr~ 2 [De acuerdo]    4 [Clase media ~ 2 [De acuerdo]            
##  8    75 2 [Mujer] 2 [De acuerdo]    5 [Clase baja]   4 [En desacuerdo]         
##  9    36 2 [Mujer] 2 [De acuerdo]    4 [Clase media ~ 4 [En desacuerdo]         
## 10    40 2 [Mujer] 2 [De acuerdo]    5 [Clase baja]   4 [En desacuerdo]         
## # ... with 2,164 more rows
</code></pre></div><h3 id="53-mutate-">5.3 mutate ()</h3>
<p>La función de mutate añade nuevas variables que son funciones de variables existentes, es decir transforma datos existentes de un data frame a nuevas columnas.</p>
<h4 id="creación-de-variable-a-partir-de-cálculos">creación de variable a partir de cálculos</h4>
<p>En nuestro primer ejemplo, crearemos una variable a partir de un cálculo, la llamaremos nueva variable y será la suma de 2 y 3, su estructura será <strong>mutate(datos_proc, nueva_variable = calculo/condicion)</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">mutate</span>(datos_proc, nueva_variable <span style="color:#f92672">=</span> <span style="color:#ae81ff">3+2</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## # A tibble: 2,613 x 6
##     edad     sexo   garan_min_vid   clase_sub      just_pago_educ nueva_variable
##    &lt;dbl&gt; &lt;dbl+lb&gt;       &lt;dbl+lbl&gt;   &lt;dbl+lbl&gt;           &lt;dbl+lbl&gt;          &lt;dbl&gt;
##  1    40 1 [Homb~ 1 [Muy de acue~ 4 [Clase m~ 4 [En desacuerdo]                5
##  2    18 1 [Homb~ 1 [Muy de acue~ 3 [Clase m~ 3 [Ni de acuerdo n~              5
##  3    66 2 [Muje~ 1 [Muy de acue~ 3 [Clase m~ 4 [En desacuerdo]                5
##  4    56 2 [Muje~ 2 [De acuerdo]  5 [Clase b~ 4 [En desacuerdo]                5
##  5    63 1 [Homb~ 1 [Muy de acue~ 5 [Clase b~ 4 [En desacuerdo]                5
##  6    62 2 [Muje~ 1 [Muy de acue~ 4 [Clase m~ 1 [Muy de acuerdo]               5
##  7    54 1 [Homb~ 2 [De acuerdo]  4 [Clase m~ 2 [De acuerdo]                   5
##  8    75 2 [Muje~ 2 [De acuerdo]  5 [Clase b~ 4 [En desacuerdo]                5
##  9    36 2 [Muje~ 2 [De acuerdo]  4 [Clase m~ 4 [En desacuerdo]                5
## 10    40 2 [Muje~ 2 [De acuerdo]  5 [Clase b~ 4 [En desacuerdo]                5
## # ... with 2,603 more rows
</code></pre></div><h4 id="mutate-y-filter">Mutate y filter</h4>
<p>Pero ¿Qué pasa si quiero crear una variable y filtrar?, para eso usaremos el operador pipe. Entonces a partir de los datos, unimos las operaciones de filter, que nos extraerá los valores que sean mayores o iguales a 3 (clase media) y que además estén en conjunto de mujeres. Además unimos la operación de mutare que creará una nueva variable que será igual al valor 5</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos_proc <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">filter</span>(clase_sub <span style="color:#f92672">&gt;=</span> <span style="color:#ae81ff">3</span> <span style="color:#f92672">&amp;</span> sexo <span style="color:#f92672">%in%</span> <span style="color:#a6e22e">c</span>(<span style="color:#e6db74">&#34;Mujer&#34;</span>)) <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">mutate</span>(nueva_variable <span style="color:#f92672">=</span> <span style="color:#ae81ff">3+2</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## # A tibble: 0 x 6
## # ... with 6 variables: edad &lt;dbl&gt;, sexo &lt;dbl+lbl&gt;, garan_min_vid &lt;dbl+lbl&gt;,
## #   clase_sub &lt;dbl+lbl&gt;, just_pago_educ &lt;dbl+lbl&gt;, nueva_variable &lt;dbl&gt;
</code></pre></div><h3 id="531-recode">5.3.1 recode()</h3>
<p>La función denominada <em>recode</em> puede reemplazar valores numéricos en base a su posición o su nombre, y valores de caracteres o factores sólo por su nombre.</p>
<h4 id="factors">Factors</h4>
<p>Para reemplazar caracteres o factores en este caso de la variable sexo, transformaremos las categorias de respuestas de Mujer a Femenino y de Hombre a Masculino</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos_proc <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">mutate</span>(sexo <span style="color:#f92672">=</span> <span style="color:#a6e22e">recode</span>(sexo, <span style="color:#e6db74">&#34;Mujer&#34;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Femenino&#34;</span>, <span style="color:#e6db74">&#34;Hombre&#34;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Masculino&#34;</span>))
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e">## # A tibble: 2,613 x 5</span>
<span style="color:#75715e">##    edad sexo           garan_min_vid            clase_sub                     just_pago_educ</span>
<span style="color:#75715e">##   &lt;dbl&gt; &lt;fct&gt;              &lt;dbl+lbl&gt;            &lt;dbl+lbl&gt;                          &lt;dbl+lbl&gt;</span>
<span style="color:#75715e">## 1    40 Masculino 1 [Muy de acuerdo] 4 [Clase media baja] 4 [En desacuerdo]                 </span>
<span style="color:#75715e">## 2    18 Masculino 1 [Muy de acuerdo] 3 [Clase media]      3 [Ni de acuerdo ni en desacuerdo]</span>
<span style="color:#75715e">## 3    66 Femenino  1 [Muy de acuerdo] 3 [Clase media]      4 [En desacuerdo]                 </span>
<span style="color:#75715e">## 4    56 Femenino  2 [De acuerdo]     5 [Clase baja]       4 [En desacuerdo]                 </span>
<span style="color:#75715e">## 5    63 Masculino 1 [Muy de acuerdo] 5 [Clase baja]       4 [En desacuerdo]                 </span>
<span style="color:#75715e">## 6    62 Femenino  1 [Muy de acuerdo] 4 [Clase media baja] 1 [Muy de acuerdo]                </span>
<span style="color:#75715e">## 7    54 Masculino 2 [De acuerdo]     4 [Clase media baja] 2 [De acuerdo]                    </span>
<span style="color:#75715e">## 8    75 Femenino  2 [De acuerdo]     5 [Clase baja]       4 [En desacuerdo]                 </span>
<span style="color:#75715e">## 9    36 Femenino  2 [De acuerdo]     4 [Clase media baja] 4 [En desacuerdo]                 </span>
<span style="color:#75715e">## 10    40 Femenino  2 [De acuerdo]     5 [Clase baja]       4 [En desacuerdo]                 </span>
<span style="color:#75715e">## # ... with 2,603 more rows</span>
</code></pre></div><h4 id="numeric">Numeric</h4>
<p>Luego transformaremos las categorias de respuesta de 1 a 5 en el grado de acuerdo o desacuerdo. Previo a esto es necesario recodificar la variable como caracter, en este caso se establece que los numeros que tiene la variable son categorias, es decir 1 es la categoría 1 y no un número. <a href="">Ver la diferencia entre character y factor en el práctico anterior</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos_proc<span style="color:#f92672">$</span>just_pago_educ <span style="color:#f92672">&lt;-</span> <span style="color:#a6e22e">as.character</span>(datos_proc<span style="color:#f92672">$</span>just_pago_educ) 

datos_proc <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">mutate</span>(just_pago_educ <span style="color:#f92672">=</span> <span style="color:#a6e22e">recode </span>(just_pago_educ, <span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Muy de acuerdo&#34;</span>, <span style="color:#e6db74">&#34;2&#34;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;De acuerdo&#34;</span>, <span style="color:#e6db74">&#34;3&#34;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Ni de acuerdo ni en desacuerdo&#34;</span>, <span style="color:#e6db74">&#34;4&#34;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;En desacuerdo&#34;</span>, <span style="color:#e6db74">&#34;5&#34;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Muy en desacuerdo&#34;</span>))
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e">## # A tibble: 2,613 x 5</span>
<span style="color:#75715e">##    edad sexo        garan_min_vid            clase_sub just_pago_educ                </span>
<span style="color:#75715e">##   &lt;dbl&gt; &lt;fct&gt;           &lt;dbl+lbl&gt;            &lt;dbl+lbl&gt; &lt;chr&gt;                         </span>
<span style="color:#75715e">## 1    40 Hombre 1 [Muy de acuerdo] 4 [Clase media baja] En desacuerdo                 </span>
<span style="color:#75715e">## 2    18 Hombre 1 [Muy de acuerdo] 3 [Clase media]      Ni de acuerdo ni en desacuerdo</span>
<span style="color:#75715e">## 3    66 Mujer  1 [Muy de acuerdo] 3 [Clase media]      En desacuerdo                 </span>
<span style="color:#75715e">## 4    56 Mujer  2 [De acuerdo]     5 [Clase baja]       En desacuerdo                 </span>
<span style="color:#75715e">## 5    63 Hombre 1 [Muy de acuerdo] 5 [Clase baja]       En desacuerdo                 </span>
<span style="color:#75715e">## 6    62 Mujer  1 [Muy de acuerdo] 4 [Clase media baja] Muy de acuerdo                </span>
<span style="color:#75715e">## 7    54 Hombre 2 [De acuerdo]     4 [Clase media baja] De acuerdo                    </span>
<span style="color:#75715e">## 8    75 Mujer  2 [De acuerdo]     5 [Clase baja]       En desacuerdo                 </span>
<span style="color:#75715e">## 9    36 Mujer  2 [De acuerdo]     4 [Clase media baja] En desacuerdo                 </span>
<span style="color:#75715e">## 10    40 Mujer  2 [De acuerdo]     5 [Clase baja]       En desacuerdo                 </span>
<span style="color:#75715e">## # ... with 2,603 more rows</span>
</code></pre></div><p>Si bien en este caso más simple usar el comando de Forcast as_factor, en ocasiones la/el investigador puede requerir tener distintos nombres de categorias, por lo que resultaría más útil este procedimiento.</p>
<h3 id="532-if_else">5.3.2 if_else()</h3>
<p>La función if_else comprueba condiciones lógicas en su primer argumento, en este caso queremos crear una nueva variable denominada d_sexo que cumpla la condición que la categoría Mujer sea visualizado como 1 y los demás como 0, su estructura será <strong>if_else(condition, Verdadero, Falso)</strong></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos_proc <span style="color:#f92672">%&gt;%</span> 
 		 <span style="color:#a6e22e">mutate</span>(d_sexo <span style="color:#f92672">=</span> <span style="color:#a6e22e">if_else</span>(sexo <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;Mujer&#34;</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>))
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e">## # A tibble: 2,613 x 6</span>
<span style="color:#75715e">##    edad sexo        garan_min_vid            clase_sub just_pago_educ d_sexo</span>
<span style="color:#75715e">##   &lt;dbl&gt; &lt;fct&gt;           &lt;dbl+lbl&gt;            &lt;dbl+lbl&gt; &lt;chr&gt;           &lt;dbl&gt;</span>
<span style="color:#75715e">## 1    40 Hombre 1 [Muy de acuerdo] 4 [Clase media baja] 4                   0</span>
<span style="color:#75715e">## 2    18 Hombre 1 [Muy de acuerdo] 3 [Clase media]      3                   0</span>
<span style="color:#75715e">## 3    66 Mujer  1 [Muy de acuerdo] 3 [Clase media]      4                   1</span>
<span style="color:#75715e">## 4    56 Mujer  2 [De acuerdo]     5 [Clase baja]       4                   1</span>
<span style="color:#75715e">## 5    63 Hombre 1 [Muy de acuerdo] 5 [Clase baja]       4                   0</span>
<span style="color:#75715e">## 6    62 Mujer  1 [Muy de acuerdo] 4 [Clase media baja] 1                   1</span>
<span style="color:#75715e">## 7    54 Hombre 2 [De acuerdo]     4 [Clase media baja] 2                   0</span>
<span style="color:#75715e">## 8    75 Mujer  2 [De acuerdo]     5 [Clase baja]       4                   1</span>
<span style="color:#75715e">## 9    36 Mujer  2 [De acuerdo]     4 [Clase media baja] 4                   1</span>
<span style="color:#75715e">## 10    40 Mujer  2 [De acuerdo]     5 [Clase baja]       4                   1</span>
<span style="color:#75715e">## # ... with 2,603 more rows</span>
</code></pre></div><p>En nuestro segundo ejemplo, creamos una variable llamada validador, que si just_pago_educ tiene un caso NA la variable tendrá categoría de respuesta False y sino será True</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos_proc <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">mutate</span>(validador <span style="color:#f92672">=</span> <span style="color:#a6e22e">if_else</span>(<span style="color:#a6e22e">is.na</span>(just_pago_educ), <span style="color:#66d9ef">FALSE</span>, <span style="color:#66d9ef">TRUE</span>))
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## # A tibble: 2,613 x 6
##     edad      sexo   garan_min_vid     clase_sub        just_pago_educ validador
##    &lt;dbl&gt; &lt;dbl+lbl&gt;       &lt;dbl+lbl&gt;     &lt;dbl+lbl&gt;             &lt;dbl+lbl&gt; &lt;lgl&gt;    
##  1    40 1 [Hombr~ 1 [Muy de acue~ 4 [Clase med~ 4 [En desacuerdo]     TRUE     
##  2    18 1 [Hombr~ 1 [Muy de acue~ 3 [Clase med~ 3 [Ni de acuerdo ni ~ TRUE     
##  3    66 2 [Mujer] 1 [Muy de acue~ 3 [Clase med~ 4 [En desacuerdo]     TRUE     
##  4    56 2 [Mujer] 2 [De acuerdo]  5 [Clase baj~ 4 [En desacuerdo]     TRUE     
##  5    63 1 [Hombr~ 1 [Muy de acue~ 5 [Clase baj~ 4 [En desacuerdo]     TRUE     
##  6    62 2 [Mujer] 1 [Muy de acue~ 4 [Clase med~ 1 [Muy de acuerdo]    TRUE     
##  7    54 1 [Hombr~ 2 [De acuerdo]  4 [Clase med~ 2 [De acuerdo]        TRUE     
##  8    75 2 [Mujer] 2 [De acuerdo]  5 [Clase baj~ 4 [En desacuerdo]     TRUE     
##  9    36 2 [Mujer] 2 [De acuerdo]  4 [Clase med~ 4 [En desacuerdo]     TRUE     
## 10    40 2 [Mujer] 2 [De acuerdo]  5 [Clase baj~ 4 [En desacuerdo]     TRUE     
## # ... with 2,603 more rows
</code></pre></div><h2 id="533-mutate-group_by-n">5.3.3 mutate group_by n()</h2>
<p>La función group_by toma datos existentes y lo convierte en datos agrupados, en nuestro primer ejemplo, los agrupa por la variable sexo y luego crearemos la variable n_sexo</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos_proc <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">group_by</span>(sexo)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## # A tibble: 2,613 x 5
## # Groups:   sexo [2]
##     edad      sexo     garan_min_vid        clase_sub             just_pago_educ
##    &lt;dbl&gt; &lt;dbl+lbl&gt;         &lt;dbl+lbl&gt;        &lt;dbl+lbl&gt;                  &lt;dbl+lbl&gt;
##  1    40 1 [Hombr~ 1 [Muy de acuerd~ 4 [Clase media ~ 4 [En desacuerdo]         
##  2    18 1 [Hombr~ 1 [Muy de acuerd~ 3 [Clase media]  3 [Ni de acuerdo ni en de~
##  3    66 2 [Mujer] 1 [Muy de acuerd~ 3 [Clase media]  4 [En desacuerdo]         
##  4    56 2 [Mujer] 2 [De acuerdo]    5 [Clase baja]   4 [En desacuerdo]         
##  5    63 1 [Hombr~ 1 [Muy de acuerd~ 5 [Clase baja]   4 [En desacuerdo]         
##  6    62 2 [Mujer] 1 [Muy de acuerd~ 4 [Clase media ~ 1 [Muy de acuerdo]        
##  7    54 1 [Hombr~ 2 [De acuerdo]    4 [Clase media ~ 2 [De acuerdo]            
##  8    75 2 [Mujer] 2 [De acuerdo]    5 [Clase baja]   4 [En desacuerdo]         
##  9    36 2 [Mujer] 2 [De acuerdo]    4 [Clase media ~ 4 [En desacuerdo]         
## 10    40 2 [Mujer] 2 [De acuerdo]    5 [Clase baja]   4 [En desacuerdo]         
## # ... with 2,603 more rows
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos_proc <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">mutate</span>(n_sexo <span style="color:#f92672">=</span> <span style="color:#a6e22e">n</span>())
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## # A tibble: 2,613 x 6
##     edad      sexo   garan_min_vid      clase_sub          just_pago_educ n_sexo
##    &lt;dbl&gt; &lt;dbl+lbl&gt;       &lt;dbl+lbl&gt;      &lt;dbl+lbl&gt;               &lt;dbl+lbl&gt;  &lt;int&gt;
##  1    40 1 [Hombr~ 1 [Muy de acue~ 4 [Clase medi~ 4 [En desacuerdo]         2613
##  2    18 1 [Hombr~ 1 [Muy de acue~ 3 [Clase medi~ 3 [Ni de acuerdo ni en~   2613
##  3    66 2 [Mujer] 1 [Muy de acue~ 3 [Clase medi~ 4 [En desacuerdo]         2613
##  4    56 2 [Mujer] 2 [De acuerdo]  5 [Clase baja] 4 [En desacuerdo]         2613
##  5    63 1 [Hombr~ 1 [Muy de acue~ 5 [Clase baja] 4 [En desacuerdo]         2613
##  6    62 2 [Mujer] 1 [Muy de acue~ 4 [Clase medi~ 1 [Muy de acuerdo]        2613
##  7    54 1 [Hombr~ 2 [De acuerdo]  4 [Clase medi~ 2 [De acuerdo]            2613
##  8    75 2 [Mujer] 2 [De acuerdo]  5 [Clase baja] 4 [En desacuerdo]         2613
##  9    36 2 [Mujer] 2 [De acuerdo]  4 [Clase medi~ 4 [En desacuerdo]         2613
## 10    40 2 [Mujer] 2 [De acuerdo]  5 [Clase baja] 4 [En desacuerdo]         2613
## # ... with 2,603 more rows
</code></pre></div><p>También podemos hacer ambas operaciones en un sólo comando</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos_proc <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">group_by</span>(sexo) <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">mutate</span>(n_sexo <span style="color:#f92672">=</span> <span style="color:#a6e22e">n</span>())
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## # A tibble: 2,613 x 6
## # Groups:   sexo [2]
##     edad      sexo   garan_min_vid      clase_sub          just_pago_educ n_sexo
##    &lt;dbl&gt; &lt;dbl+lbl&gt;       &lt;dbl+lbl&gt;      &lt;dbl+lbl&gt;               &lt;dbl+lbl&gt;  &lt;int&gt;
##  1    40 1 [Hombr~ 1 [Muy de acue~ 4 [Clase medi~ 4 [En desacuerdo]         1012
##  2    18 1 [Hombr~ 1 [Muy de acue~ 3 [Clase medi~ 3 [Ni de acuerdo ni en~   1012
##  3    66 2 [Mujer] 1 [Muy de acue~ 3 [Clase medi~ 4 [En desacuerdo]         1601
##  4    56 2 [Mujer] 2 [De acuerdo]  5 [Clase baja] 4 [En desacuerdo]         1601
##  5    63 1 [Hombr~ 1 [Muy de acue~ 5 [Clase baja] 4 [En desacuerdo]         1012
##  6    62 2 [Mujer] 1 [Muy de acue~ 4 [Clase medi~ 1 [Muy de acuerdo]        1601
##  7    54 1 [Hombr~ 2 [De acuerdo]  4 [Clase medi~ 2 [De acuerdo]            1012
##  8    75 2 [Mujer] 2 [De acuerdo]  5 [Clase baja] 4 [En desacuerdo]         1601
##  9    36 2 [Mujer] 2 [De acuerdo]  4 [Clase medi~ 4 [En desacuerdo]         1601
## 10    40 2 [Mujer] 2 [De acuerdo]  5 [Clase baja] 4 [En desacuerdo]         1601
## # ... with 2,603 more rows
</code></pre></div><h1 id="54-summarise">5.4 summarise</h1>
<p>La función summarise resume dato a una sola fila de valores, en nuestro primer ejemplo, toma los datos creados anteriormente y los resume a un solo valor</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos_proc <span style="color:#f92672">%&gt;%</span>
  <span style="color:#a6e22e">summarise</span>(n_sexo <span style="color:#f92672">=</span> <span style="color:#a6e22e">n</span>())
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## # A tibble: 1 x 1
##   n_sexo
##    &lt;int&gt;
## 1   2613
</code></pre></div><p>En nuestro segundo ejemplo, creamos una nueva tabla donde nos agrupara los datos según sexo y además resumirá los casos</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos_proc <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">group_by</span>(sexo) <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">summarise</span>(n_sexo <span style="color:#f92672">=</span> <span style="color:#a6e22e">n</span>())
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## # A tibble: 2 x 2
##         sexo n_sexo
##    &lt;dbl+lbl&gt;  &lt;int&gt;
## 1 1 [Hombre]   1012
## 2 2 [Mujer]    1601
</code></pre></div><h2 id="6-resumen-con-procesamiento-de-las-variables">6. Resumen con procesamiento de las variables</h2>
<p>Previo a la manipulación de los datos es necesario conocer como se distribuye esta por eso el paso inicial es un descriptivo de las variables a procesar. Para ello, usaremos la función frq del paquete <strong>sjmisc</strong>, que  permite analizar la frecuencia las variables que <strong>no sean numericas</strong>. Para las variables numericas, en cambio, usaremos la función <strong>descr</strong> del mismo paquete, que nos entregará las <strong>medidas de tendencia central, dispersión y posición</strong> de la variable. <a href="">Ver práctico anterior</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">descr</span>(datos_proc<span style="color:#f92672">$</span>edad) <span style="color:#75715e">#Usar la función descr con la variable edad de los datos datos_proc.</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## 
## ## Basic descriptive statistics
## 
##  var    type        label    n NA.prc  mean    sd   se md trimmed      range
##   dd numeric Edad (anyos) 2613      0 45.54 17.68 0.35 45   44.75 78 (18-96)
##  iqr skew
##   29 0.29
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">frq</span>(datos_proc<span style="color:#f92672">$</span>sexo)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## 
## Sexo del entrevistado (x) &lt;numeric&gt;
## # total N=2613  valid N=2613  mean=1.61  sd=0.49
## 
## Value |  Label |    N | Raw % | Valid % | Cum. %
## ------------------------------------------------
##     1 | Hombre | 1012 | 38.73 |   38.73 |  38.73
##     2 |  Mujer | 1601 | 61.27 |   61.27 | 100.00
##  &lt;NA&gt; |   &lt;NA&gt; |    0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">frq</span>(datos_proc<span style="color:#f92672">$</span>garan_min_vid)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## 
## P35 - Rol Gobierno: garantizar minimo vida (x) &lt;numeric&gt;
## # total N=2613  valid N=2613  mean=2.09  sd=1.24
## 
## Value |                          Label |    N | Raw % | Valid % | Cum. %
## ------------------------------------------------------------------------
##     1 |                 Muy de acuerdo |  836 | 31.99 |   31.99 |  31.99
##     2 |                     De acuerdo | 1226 | 46.92 |   46.92 |  78.91
##     3 | Ni de acuerdo ni en desacuerdo |  285 | 10.91 |   10.91 |  89.82
##     4 |                  En desacuerdo |  153 |  5.86 |    5.86 |  95.68
##     5 |              Muy en desacuerdo |   67 |  2.56 |    2.56 |  98.24
##     8 |                   NS (no leer) |   41 |  1.57 |    1.57 |  99.81
##     9 |                   NR (no leer) |    5 |  0.19 |    0.19 | 100.00
##  &lt;NA&gt; |                           &lt;NA&gt; |    0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">frq</span>(datos_proc<span style="color:#f92672">$</span>clase_sub)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## 
## P14 - ¿En qué clase social ubicaría a la gente como usted? (x) &lt;numeric&gt;
## # total N=2613  valid N=2613  mean=3.47  sd=1.09
## 
## Value |            Label |   N | Raw % | Valid % | Cum. %
## ---------------------------------------------------------
##     1 |       Clase alta | 119 |  4.55 |    4.55 |   4.55
##     2 | Clase media alta | 320 | 12.25 |   12.25 |  16.80
##     3 |      Clase media | 890 | 34.06 |   34.06 |  50.86
##     4 | Clase media baja | 807 | 30.88 |   30.88 |  81.75
##     5 |       Clase baja | 468 | 17.91 |   17.91 |  99.66
##     8 |     NS (no leer) |   9 |  0.34 |    0.34 | 100.00
##     9 |     NR (no leer) |   0 |  0.00 |    0.00 | 100.00
##  &lt;NA&gt; |             &lt;NA&gt; |   0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">frq</span>(datos_proc<span style="color:#f92672">$</span>just_pago_educ)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">## 
## P25 - Justo: mas pago, mejor educacion (x) &lt;numeric&gt;
## # total N=2613  valid N=2613  mean=3.50  sd=1.29
## 
## Value |                          Label |   N | Raw % | Valid % | Cum. %
## -----------------------------------------------------------------------
##     1 |                 Muy de acuerdo | 157 |  6.01 |    6.01 |   6.01
##     2 |                     De acuerdo | 559 | 21.39 |   21.39 |  27.40
##     3 | Ni de acuerdo ni en desacuerdo | 346 | 13.24 |   13.24 |  40.64
##     4 |                  En desacuerdo | 997 | 38.16 |   38.16 |  78.80
##     5 |              Muy en desacuerdo | 528 | 20.21 |   20.21 |  99.00
##     8 |                   NS (no leer) |  20 |  0.77 |    0.77 |  99.77
##     9 |                   NR (no leer) |   6 |  0.23 |    0.23 | 100.00
##  &lt;NA&gt; |                           &lt;NA&gt; |   0 |  0.00 |    &lt;NA&gt; |   &lt;NA&gt;
</code></pre></div><p>Luego debemos recodificar las variables según sean necesario, para ello utilizaremos las librerias car y Dplyr</p>
<p>Para la libreria car recodificaremos todas las categorias de respuesta como no sabe (NS) o no responde(NR) en NA&rsquo;s</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos_proc<span style="color:#f92672">$</span>garan_min_vid <span style="color:#f92672">&lt;-</span> car<span style="color:#f92672">::</span><span style="color:#a6e22e">recode</span>(datos_proc<span style="color:#f92672">$</span>garan_min_vid, <span style="color:#e6db74">&#34;c(8, 9)=NA&#34;</span>) <span style="color:#75715e">#acá con :: especificamos qué libreria usar</span>
datos_proc<span style="color:#f92672">$</span>clase_sub <span style="color:#f92672">&lt;-</span> car<span style="color:#f92672">::</span><span style="color:#a6e22e">recode</span>(datos_proc<span style="color:#f92672">$</span>clase_sub, <span style="color:#e6db74">&#34;c(8, 9)=NA&#34;</span>)
datos_proc<span style="color:#f92672">$</span>just_pago_educ <span style="color:#f92672">&lt;-</span> car<span style="color:#f92672">::</span><span style="color:#a6e22e">recode</span>(datos_proc<span style="color:#f92672">$</span>just_pago_educ, <span style="color:#e6db74">&#34;c(8, 9)=NA&#34;</span>)
</code></pre></div><p>Tambien podemos recodificar para agruparlas</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos_proc<span style="color:#f92672">$</span>just_pago_educ <span style="color:#f92672">&lt;-</span> car<span style="color:#f92672">::</span><span style="color:#a6e22e">recode</span>(datos_proc<span style="color:#f92672">$</span>just_pago_educ, <span style="color:#e6db74">&#34;1:2=1;3=2;4:5=3&#34;</span>)
</code></pre></div><p>Luego con Dplyr le asignamos nuevos valores</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">datos_proc <span style="color:#f92672">%&gt;%</span> 
  <span style="color:#a6e22e">mutate</span>(just_pago_educ <span style="color:#f92672">=</span> <span style="color:#a6e22e">recode </span>(just_pago_educ, <span style="color:#e6db74">&#34;1&#34;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;a favor&#34;</span>, <span style="color:#e6db74">&#34;2&#34;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;neutro&#34;</span>, <span style="color:#e6db74">&#34;3&#34;</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;en contra&#34;</span>))
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#75715e">## # A tibble: 2,613 x 5</span>
<span style="color:#75715e">##    edad sexo        garan_min_vid            clase_sub just_pago_educ</span>
<span style="color:#75715e">##   &lt;dbl&gt; &lt;fct&gt;           &lt;dbl+lbl&gt;            &lt;dbl+lbl&gt; &lt;chr&gt;         </span>
<span style="color:#75715e">## 1    40 Hombre 1 [Muy de acuerdo] 4 [Clase media baja] en contra     </span>
<span style="color:#75715e">## 2    18 Hombre 1 [Muy de acuerdo] 3 [Clase media]      neutro        </span>
<span style="color:#75715e">## 3    66 Mujer  1 [Muy de acuerdo] 3 [Clase media]      en contra     </span>
<span style="color:#75715e">## 4    56 Mujer  2 [De acuerdo]     5 [Clase baja]       en contra     </span>
<span style="color:#75715e">## 5    63 Hombre 1 [Muy de acuerdo] 5 [Clase baja]       en contra     </span>
<span style="color:#75715e">## 6    62 Mujer  1 [Muy de acuerdo] 4 [Clase media baja] a favor       </span>
<span style="color:#75715e">## 7    54 Hombre 2 [De acuerdo]     4 [Clase media baja] a favor       </span>
<span style="color:#75715e">## 8    75 Mujer  2 [De acuerdo]     5 [Clase baja]       en contra     </span>
<span style="color:#75715e">## 9    36 Mujer  2 [De acuerdo]     4 [Clase media baja] en contra     </span>
<span style="color:#75715e">## 10    40 Mujer  2 [De acuerdo]     5 [Clase baja]       en contra      </span>
<span style="color:#75715e">## # ... with 2,603 more rows</span>
</code></pre></div><h2 id="7-guardar-base-procesada">7. Guardar base procesada</h2>
<p>Para guardar la base de datos procesada, debes dirigir la ruta hacia tu Rproject</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r"><span style="color:#a6e22e">save</span>(datos_proc, data <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;../Rproject/datos_proc.RData&#34;</span>)
</code></pre></div><h2 id="8-reporte-de-progreso">8. Reporte de progreso</h2>
<p>¡Recuerda rellenar tu reporte de progreso! En <a href="https://learn-r.formr.org/">https://learn-r.formr.org/</a>. Te llegó un código único a tu correo electrónico. Mediante él debes acceder para actualizar tu estado de avance del curso.</p>

                    </div>

                    



                    
                    <div class="article-widget">
                        
<div class="post-nav">
  
  
  
  <div class="post-nav-item">
    <div class="meta-nav">Next</div>
    <a href="/example/01-practico/" rel="prev">Bienvenido/a a R, RStudio y Github</a>
  </div>
  
</div>

                    </div>
                    
                </div>

                <div class="body-footer">
                    <p>Last updated on August 30, 2021</p>

                    





                    



                </div>

            </article>

            <footer>
    <hr>

    <div class="row course-info">
        <div class="col-md-7">
            <p>
                <strong>2255: Análisis Estadístico en R (II° Semestre- 2021)</strong><br>

                <a href="https://www.uahurtado.cl/" target="_blank" rel="noopener">Universidad Alberto Hurtado</a> &emsp;&emsp;
                <a href="http://sociologia.uahurtado.cl/" target="_blank" rel="noopener">Departamento de Sociología</a>
            </p>

            <p>
                <a href="https://valentinaandrade.netlify.app/" target="_blank" rel="noopener"><i class="fas fa-user"></i>
                    Valentina Andrade</a> &emsp;&emsp;
                <a href="mailto:valentinaandrade@uchile.cl"><i class="fas fa-envelope"></i>
                    valentinaandrade@uchile.cl</a>
            </p>

            <p>
                <i class="far fa-calendar-alt"></i> Clases: Lunes 16.30-17.40 &emsp;&emsp;
                <i class="fas fa-pencil-alt"></i> Práctico: Lunes 18.00-19.20 
                <br><i class="fas fa-university"></i> Online, en link de Zoom
            </p>
        </div>

        <div class="col-md-5 credits">
            <p>All content licensed under a <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" rel="noopener">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.</p>
            
            <p>Content <i class="fab fa-creative-commons"></i> 2021. Web developed by Andrew Heiss and custom by <a href="https://valentinaandrade.netlify.app/" target="_blank" rel="noopener">Valentina Andrade</a></p>
        
            <p>This site created with the <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> in <a href="https://bookdown.org/yihui/blogdown/" target="_blank" rel="noopener">blogdown</a> and <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a>. </p>
            
            <p><a href="https://github.com/valentinaandrade" target="_blank" rel="noopener"><i class="fab fa-github"></i> View the source at GitHub.</a></p>
        </div>
    </div>
</footer>


        </main>
    </div>
</div>

        

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js" integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin="anonymous"></script>

      
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      

      
      

      

      

    

    
    
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    
    
    

    
    

    
    
    
    

    
    <script src="/js/bootstrap.bundle.min.8b7df62fd2da18ce73e29c13cc0a6198.js"></script>

    
    

    
    
    
    
    
    
    
    
    
    <script src="/en/js/wowchemy.min.c6ceb5c48772e46156651a48070d6139.js"></script>

    

<script src="/js/math-code.js"></script>


    
    

    
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>

</html>
